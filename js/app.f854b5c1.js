(function(t){function e(e){for(var a,r,c=e[0],o=e[1],l=e[2],d=0,f=[];d<c.length;d++)r=c[d],n[r]&&f.push(n[r][0]),n[r]=0;for(a in o)Object.prototype.hasOwnProperty.call(o,a)&&(t[a]=o[a]);u&&u(e);while(f.length)f.shift()();return s.push.apply(s,l||[]),i()}function i(){for(var t,e=0;e<s.length;e++){for(var i=s[e],a=!0,c=1;c<i.length;c++){var o=i[c];0!==n[o]&&(a=!1)}a&&(s.splice(e--,1),t=r(r.s=i[0]))}return t}var a={},n={app:0},s=[];function r(e){if(a[e])return a[e].exports;var i=a[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=a,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(i,a,function(e){return t[e]}.bind(null,a));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/weather-app/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],o=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var u=o;s.push([0,"chunk-vendors"]),i()})({0:function(t,e,i){t.exports=i("cd49")},2759:function(t,e,i){"use strict";var a=i("ee1b"),n=i.n(a);n.a},3273:function(t,e,i){"use strict";var a=i("eefb"),n=i.n(a);n.a},"49f8":function(t,e,i){var a={"./en.json":"edd4","./ru.json":"7704"};function n(t){var e=s(t);return i(e)}function s(t){var e=a[t];if(!(e+1)){var i=new Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}return e}n.keys=function(){return Object.keys(a)},n.resolve=s,t.exports=n,n.id="49f8"},"4da3":function(t,e,i){},"4e1e":function(t,e,i){},"6b38":function(t,e,i){"use strict";var a=i("f2c5"),n=i.n(a);n.a},"6ded":function(t,e,i){"use strict";var a=i("ca66"),n=i.n(a);n.a},7704:function(t){t.exports={header:{lang:"ru",lang_item:["Русский","English"]},err:{1:"Запрещено пользователем",2:"Местопложение не определено",3:"Истекло время ожидания",800:"Ошибка 800",900:"Ошибка 900"}}},7772:function(t,e,i){},7999:function(t,e,i){},"86c5":function(t,e,i){"use strict";var a=i("7999"),n=i.n(a);n.a},"8baf":function(t,e,i){"use strict";var a=i("7772"),n=i.n(a);n.a},"8dae":function(t,e,i){},"8f59":function(t,e,i){},9225:function(t,e,i){},a9fd:function(t,e,i){"use strict";var a=i("e0b8"),n=i.n(a);n.a},c4af:function(t,e,i){"use strict";var a=i("e861"),n=i.n(a);n.a},ca66:function(t,e,i){},ca6e:function(t,e,i){},cccb:function(t,e,i){"use strict";var a=i("8f59"),n=i.n(a);n.a},cd03:function(t,e,i){"use strict";var a=i("ca6e"),n=i.n(a);n.a},cd49:function(t,e,i){"use strict";i.r(e);i("cadf"),i("551c"),i("f751"),i("097d");var a=i("2b0e"),n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"weather-app"}},[t.isWeather?i("RouterView"):i("CitySelect")],1)},s=[],r=i("d225"),c=i("b0b4"),o=i("308d"),l=i("6bb5"),u=i("4e2b"),d=i("9ab4"),f=i("60a3"),h=i("4bb5"),v=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city-find"},[i("div",{staticClass:"city-find__content content"},[t._m(0),i("div",{staticClass:"city-find__message",domProps:{innerHTML:t._s(t.isError?t.msg.error:t.msg.success)}}),i("div",{staticClass:"city-find__form"},[i("transition",{attrs:{name:"el-fade-in"}},[t.isHandle?i("div",{staticClass:"city-find__field"},[i("CitySearch",{ref:"search",attrs:{placeholder:"Ваш город","remote-method":t.input,loading:t.isLoading},on:{change:t.change},model:{value:t.city,callback:function(e){t.city=e},expression:"city"}},t._l(t.cities,function(e){return i("el-option",{key:e.id,attrs:{value:e,label:e.value}},[i("div",{staticClass:"city-find__value"},[t._v(t._s(e.value))]),i("div",{staticClass:"city-find__label"},[t._v(t._s(e.fullName))])])}),1)],1):i("div",{staticClass:"city-search__buttons"},[i("el-button",{staticClass:"app-btn",on:{click:t.getCity}},[t._v("Мое местоположение")]),i("el-button",{staticClass:"app-btn",attrs:{type:"text"},on:{click:t.toggleFindType}},[t._v("Добавить вручную")])],1)])],1)])])},y=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city-find__icon"},[i("div",{staticClass:"el-icon-location-information"})])}],p=(i("386d"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("header",{staticClass:"header"},[i("div",{staticClass:"header-inner content"},[i("div",{staticClass:"header-menu",on:{click:t.openDrawer}},[i("span")])])])}),m=[],b=function(t){function e(){return Object(r["a"])(this,e),Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"openDrawer",value:function(){this.$emit("openDrawer",!0)}},{key:"mounted",value:function(){}}]),e}(f["c"]);b=d["a"]([Object(f["a"])({components:{}})],b);var _=b,g=_,C=(i("8baf"),i("2877")),w=Object(C["a"])(g,p,m,!1,null,null,null),O=w.exports,j=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"weather"},[i("div",{staticClass:"weather__body"},[t._t("body")],2),i("div",{staticClass:"weather__footer"},[t._t("footer")],2)])},k=[],x=function(t){function e(){return Object(r["a"])(this,e),Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){this.$loader.hide()}}]),e}(f["c"]);x=d["a"]([f["a"]],x);var $=x,E=$,S=(i("6ded"),Object(C["a"])(E,j,k,!1,null,null,null)),T=S.exports,I=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city-search"},[i("el-select",t._g(t._b({ref:"select",attrs:{autofocus:!0,filterable:!0,remote:!0,"default-first-option":"","popper-append-to-body":!1}},"el-select",t.$attrs,!1),t.$listeners),[t._t("default")],2),i("div",{staticClass:"city-search__icon"},[t.$attrs.loading?i("div",{staticClass:"city-search__spinner"},[i("svg",{staticClass:"spinner",attrs:{width:"28",height:"28",viewBox:"0 0 28 28",xmlns:"http://www.w3.org/2000/svg"}},[i("g",{staticClass:"group"},[i("circle",{staticClass:"path",attrs:{cx:"14",cy:"14",r:"7",fill:"none"}})])])]):i("div",{staticClass:"el-icon-edit"})])],1)},L=[],M=function(t){function e(){return Object(r["a"])(this,e),Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){}}]),e}(f["c"]);M=d["a"]([Object(f["a"])({inheritAttrs:!1})],M);var D=M,P=D,H=(i("6b38"),Object(C["a"])(P,I,L,!1,null,null,null)),F=H.exports,W=(i("28a5"),void 0),N=function(t,e){var i=null;return function(){for(var a=arguments.length,n=new Array(a),s=0;s<a;s++)n[s]=arguments[s];var r=function(){t.apply(W,n),i=null};i&&clearTimeout(i),i=setTimeout(r,e)}};function B(){var t={enableHighAccuracy:!0,timeout:5e3,maximumAge:0};return new Promise(function(e,i){navigator.geolocation.getCurrentPosition(e,i,t)}).then(function(t){var e=t.coords,i=e.latitude,a=e.longitude;return{code:200,lat:i,lon:a}}).catch(function(t){return{code:t.code,lat:null,lon:null}})}function A(t,e){try{return!t.type||/^(city|town|village)$/.test(t.type)}catch(i){return!1}}var R=function t(e){Object(r["a"])(this,t);try{var i=e.place_id,a=e.lat,n=e.lon,s=e.display_name,c=e.address,o=c.country,l=c.state,u=c.city,d="РФ"===o?"Россия":o,f=l+", "+d,h=s.split(",").slice(1).join(",").trim();this.id=i,this.value=u,this.fullName=h,this.label=f,this.lat=a,this.lon=n,this.weather=null,this.forecast=null}catch(v){return null}},U=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.cities=[],t.city=null,t.isHandle=!1,t.isLoading=!1,t.isError=!1,t.msg={success:"Добавьте город <br>для отображения погоды",error:"Неудалось определить местоположение <br>Введите город в ручную"},t.debounceFind=N(t.findCity,800),t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"toggleFindType",value:function(){var t=this;this.isHandle=!this.isHandle,this.isHandle&&setTimeout(function(){return t.$refs.search.$refs.select.focus()},300)}},{key:"input",value:function(t){this.isLoading=!0,this.debounceFind(t)}},{key:"change",value:function(t){console.log(t),this.addCity(t)}},{key:"findCity",value:function(t){var e=this;0!==t.length?this.getCityByName(t).then(function(t){e.isLoading=!1,e.cities=t}).catch(function(){e.isLoading=!1}):this.isLoading=!1}},{key:"getCity",value:function(){var t=this;this.getCityByPosition().then(function(e){return t.addCity(e)})}},{key:"showError",value:function(t){t="err."+t,this.isError=!0,this.$message({showClose:!0,message:"".concat(this.$t(t)),type:"error",duration:5e4})}},{key:"submit",value:function(){var t=this;this.addCity(this.city).catch(function(e){console.log(e),t.showError(e)})}},{key:"mounted",value:function(){this.$loader.hide()}}]),e}(f["c"]);d["a"]([h["a"]],U.prototype,"getCityByName",void 0),d["a"]([h["a"]],U.prototype,"getCityByPosition",void 0),d["a"]([h["a"]],U.prototype,"addCity",void 0),d["a"]([h["b"]],U.prototype,"currentCity",void 0),U=d["a"]([Object(f["a"])({components:{Header:O,Main:T,CitySearch:F}})],U);var z=U,G=z,J=(i("c4af"),Object(C["a"])(G,v,y,!1,null,null,null)),V=J.exports,q=(i("9e30"),i("276b"),function(t){function e(){return Object(r["a"])(this,e),Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"created",value:function(){this.$loader.show({message:"Загрузка"}),window.onfocus=function(){console.log("focus")}}}]),e}(f["c"]));d["a"]([h["b"]],q.prototype,"isWeather",void 0),q=d["a"]([Object(f["a"])({components:{CitySelect:V}})],q);var Z=q,K=Z,Q=Object(C["a"])(K,n,s,!1,null,null,null),X=Q.exports,Y=i("8c4f"),tt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"home",class:"is-"+t.time},[i("Header",{on:{openDrawer:t.toggleDrawer}}),i("Weather",[i("CityWeather",{attrs:{slot:"body",city:t.currentCity},slot:"body"}),i("CityForecast",{attrs:{slot:"footer",city:t.currentCity},slot:"footer"})],1),i("transition",{attrs:{name:"side-right"}},[i("Drawer",{directives:[{name:"show",rawName:"v-show",value:t.drawer,expression:"drawer"}],on:{close:t.toggleDrawer}})],1)],1)},et=[],it=i("bc3a"),at=i.n(it),nt=(i("4917"),i("ac6a"),i("a925"));function st(){var t=i("49f8"),e={};return t.keys().forEach(function(i){var a=i.match(/([A-Za-z0-9-_]+)\./i);if(a&&a.length>1){var n=a[1];e[n]=t(i)}}),e}function rt(){var t;try{t=navigator.language}catch(i){t="ru"}var e="ru"===t||"ru-RU"===t?"ru":"en";return localStorage.setItem("app_lang",e),e}a["default"].use(nt["a"]);var ct=new nt["a"]({locale:localStorage.getItem("app_lang")||rt()||"ru",fallbackLocale:"en",messages:st(),silentTranslationWarn:!0,missing:function(t,e){console.warn(t,e)}}),ot=at.a.create({baseURL:"https://eu1.locationiq.com/v1",params:{key:"b0d4c38e2f7693",format:"json",addressdetails:1,normalizecity:1,zoom:10}});ot.interceptors.response.use(function(t){return t},function(t){return Promise.reject(t)});var lt=at.a.create({baseURL:"https://api.openweathermap.org/data/2.5",params:{APPID:"89c56f6b59002f9ebaa851d4f8bd08bd"}}),ut=function(t){return ot.get("/search.php",{params:{language:ct.locale,city:t}}).then(function(e){return e.data.reduce(function(e,i){return A(i,t)?e.concat(new R(i)):e},[])}).catch(function(){return[]})},dt=function(t){var e=t.lat,i=t.lon;return ot.get("/reverse.php",{params:{language:ct.locale,lat:e,lon:i}}).then(function(t){return new R(t.data)}).catch(function(){return null})},ft=function(t){var e=t.lat,i=t.lon;return lt.get("/weather",{params:{lat:e,lon:i,lang:ct.locale,units:"metric"}}).then(function(t){return t.data})},ht=function(t){var e=t.lat,i=t.lon;return lt.get("/forecast",{params:{lat:e,lon:i,lang:ct.locale,units:"metric"}}).then(function(t){return t.data})},vt={getWeather:ft,getForecast:ht,getCity:dt,searchCity:ut},yt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city"},[i("div",{staticClass:"city-name"},[t._v(t._s(t.city.value))]),i("div",{staticClass:"city-name__label"},[t._v(t._s(t.city.label))]),i("div",{staticClass:"city-weather"},[i("div",{staticClass:"city-weather__state"},[i("div",{staticClass:"city-weather__icon"},[i("img",{attrs:{src:"./img/weather-icon/"+t.icon+".svg"}})]),i("div",{staticClass:"city-weather__temp"},[t._v(t._s(Math.round(t.weather.main.temp))+"°C")]),i("div",{staticClass:"city-weather__desc"},[t._v(t._s(t.weather.weather[0].description))]),i("div",{staticClass:"city-weather__info"},[i("div",{staticClass:"city-weather__wind"},[t._v(t._s(t.weather.wind.speed)+" М/с")]),i("div",{staticClass:"city-weather__humidity"},[t._v(t._s(t.weather.main.humidity)+"%")]),i("div",{staticClass:"city-weather__pressure"},[t._v(t._s(Math.round(t.weather.main.pressure/1.333))+" мм. рт. ст")])])])])])},pt=[],mt=function(t){function e(){return Object(r["a"])(this,e),Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"checkTimestamp",value:function(){var t=Date.now(),e=t-1e3*this.weather.dt,i=36e5;return Math.floor(e/i)}},{key:"mounted",value:function(){this.checkTimestamp()}},{key:"weather",get:function(){return this.city.weather}},{key:"icon",get:function(){return this.weather.weather[0].icon}}]),e}(f["c"]);d["a"]([Object(f["b"])()],mt.prototype,"city",void 0),mt=d["a"]([f["a"]],mt);var bt=mt,_t=bt,gt=(i("f0c0"),Object(C["a"])(_t,yt,pt,!1,null,null,null)),Ct=gt.exports,wt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"forecast"},[i("div",{staticClass:"forecast-list"},t._l(t.dayForecast,function(e){return i("div",{staticClass:"forecast-item"},[i("div",{staticClass:"forecast-item__tiem"},[t._v(t._s(e.time))]),i("div",{staticClass:"forecast-item__icon"},[i("img",{attrs:{src:"./img/weather-icon/"+e.icon+".svg"}})]),i("div",{staticClass:"forecast-item__temp"},[t._v(t._s(e.temp)+"°")])])}),0)])},Ot=[],jt=i("5a0c"),kt=i.n(jt),xt=function(t){function e(){return Object(r["a"])(this,e),Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"first",value:function(){var t=kt()(this.dayForecast[0].dt_txt).format("HH");console.log(t)}},{key:"checkTimestamp",value:function(){var t=Date.now(),e=t-1e3*this.weather.dt,i=36e5;return Math.floor(e/i)}},{key:"mounted",value:function(){this.first(),this.checkTimestamp()}},{key:"weather",get:function(){return this.city.weather}},{key:"forecast",get:function(){return this.city.forecast}},{key:"dayForecast",get:function(){return this.forecast.slice(0,5).map(function(t){var e=kt()(t.dt_txt).format("HH");return{time:"".concat(e,":00"),icon:t.weather[0].icon,temp:Math.round(t.main.temp)}})}}]),e}(f["c"]);d["a"]([Object(f["b"])()],xt.prototype,"city",void 0),xt=d["a"]([f["a"]],xt);var $t=xt,Et=$t,St=(i("2759"),Object(C["a"])(Et,wt,Ot,!1,null,null,null)),Tt=St.exports,It=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"drawer"},[i("header",{staticClass:"drawer-header"},[i("div",{staticClass:"drawer-search"},[!1===t.isSearch?i("div",{staticClass:"drawer-close",on:{click:t.close}},[i("span",{staticClass:"el-icon-close"})]):i("div",{staticClass:"drawer-back",on:{click:t.closeSearch}},[i("span",{staticClass:"el-icon-back"})]),t.isSearch?i("div",{staticClass:"drawer-search__input"},[i("input",{ref:"input",attrs:{placeholder:"Введите название города"},domProps:{value:t.city},on:{input:t.input}})]):t._e(),i("div",{staticClass:"drawer-search__icon",on:{click:t.openSearch}},[i("span",{staticClass:"el-icon-search"})])])]),i("section",{staticClass:"drawer-content"},[t.isSearch?i("div",{staticClass:"search-results"},[t.cities.length?t._e():i("div",{staticClass:"search-results__empty"},[t._v("Ничего не найдено")]),t._l(t.cities,function(e){return i("CityListItem",{key:e.id,attrs:{city:e},on:{click:function(i){return t.select(e)}}})})],2):i("div",{staticClass:"drawer-content"},[i("div",{staticClass:"drawer-tabs"},t._l(t.tabs,function(e,a){return i("div",{staticClass:"drawer-tabs__item",class:{"is-active":a===t.activeTab},on:{click:function(e){return t.changeTab(a)}}},[t._v(t._s(e.name))])}),0),i("div",{staticClass:"drawer-content__scroll"},[i(t.tabs[t.activeTab].value,{tag:"component"})],1)]),"CityList"!==t.tabs[t.activeTab].value||t.isSearch?t._e():i("el-button",{staticClass:"city-list__add",attrs:{circle:"",icon:"el-icon-plus",type:"primary"},on:{click:t.openSearch}})],1)])},Lt=[],Mt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city-list"},[i("div",{staticClass:"city-list__title"},[t._v("Выбранный город")]),i("div",{staticClass:"city-list__current"},[i("CityListItem",{attrs:{city:t.currentCity}})],1),i("div",{staticClass:"city-list__title"},[t._v("Все города")]),i("div",{staticClass:"city-list__all"},t._l(t.cities,function(e,a){return i("CityListItem",{key:e.id,attrs:{menu:!0,city:e},on:{remove:function(e){return t.removeCity(a)},click:function(e){return t.setCityIndex(a)}}})}),1)])},Dt=[],Pt=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"city-item"},[i("div",{staticClass:"city-item__name",on:{click:function(e){return t.$emit("click")}}},[i("div",{staticClass:"city-item__value"},[t._v(t._s(t.city.value))]),i("div",{staticClass:"city-item__label"},[t._v(t._s(t.city.fullName))])]),t.city.weather?i("div",{staticClass:"city-item__temp"},[i("span",[t._v(t._s(Math.round(t.city.weather.main.temp))+"°C")])]):t._e(),i("div",{staticClass:"city-item__menu"},[t.menu?i("el-dropdown",{attrs:{trigger:"click",placement:"bottom"},on:{command:t.select}},[i("span",{staticClass:"el-icon-more"}),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[t._v("Редактировать")]),i("el-dropdown-item",{attrs:{command:"remove"}},[t._v("Удалить")])],1)],1):t._e()],1)])},Ht=[],Ft=function(t){function e(){return Object(r["a"])(this,e),Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"select",value:function(t){"remove"===t&&this.$emit("remove")}},{key:"mounted",value:function(){}}]),e}(f["c"]);d["a"]([Object(f["b"])()],Ft.prototype,"city",void 0),d["a"]([Object(f["b"])({default:!1})],Ft.prototype,"menu",void 0),Ft=d["a"]([Object(f["a"])({components:{}})],Ft);var Wt=Ft,Nt=Wt,Bt=(i("3273"),Object(C["a"])(Nt,Pt,Ht,!1,null,null,null)),At=Bt.exports,Rt=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.test=Array(15),t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){}}]),e}(f["c"]);d["a"]([h["b"]],Rt.prototype,"currentCity",void 0),d["a"]([h["c"]],Rt.prototype,"setCityIndex",void 0),d["a"]([h["d"]],Rt.prototype,"cities",void 0),d["a"]([h["a"]],Rt.prototype,"removeCity",void 0),Rt=d["a"]([Object(f["a"])({components:{CityListItem:At}})],Rt);var Ut=Rt,zt=Ut,Gt=(i("e20c"),Object(C["a"])(zt,Mt,Dt,!1,null,null,null)),Jt=Gt.exports,Vt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},qt=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"config"},[i("div",[t._v("Configuration")])])}],Zt=function(t){function e(){return Object(r["a"])(this,e),Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments))}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"mounted",value:function(){}}]),e}(f["c"]);d["a"]([h["b"]],Zt.prototype,"currentCity",void 0),Zt=d["a"]([Object(f["a"])({components:{CityItem:At}})],Zt);var Kt=Zt,Qt=Kt,Xt=Object(C["a"])(Qt,Vt,qt,!1,null,null,null),Yt=Xt.exports,te=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.tabs=[{value:"CityList",name:"Города"},{value:"Config",name:"Настройки"}],t.activeTab=0,t.isLoading=!1,t.isSearch=!1,t.cities=[],t.city="",t.debounceFind=N(t.findCity,800),t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"input",value:function(t){var e=t.target.value;console.log(e),this.city=e,this.debounceFind(e)}},{key:"findCity",value:function(t){var e=this;0!==t.length?this.getCityByName(t).then(function(t){e.isLoading=!1,e.cities=t}).catch(function(){e.isLoading=!1}):this.isLoading=!1}},{key:"select",value:function(t){var e=this;this.addCity(t).then(function(){e.city="",e.closeSearch()})}},{key:"openSearch",value:function(){var t=this;this.isSearch||(this.isSearch=!0,this.$nextTick(function(){return t.$refs.input.focus()}))}},{key:"closeSearch",value:function(){this.isSearch=!1}},{key:"changeTab",value:function(t){this.activeTab=t}},{key:"close",value:function(){this.$emit("close",!1)}},{key:"mounted",value:function(){}}]),e}(f["c"]);d["a"]([h["a"]],te.prototype,"getCityByName",void 0),d["a"]([h["a"]],te.prototype,"addCity",void 0),te=d["a"]([Object(f["a"])({components:{CityList:Jt,CityListItem:At,Config:Yt}})],te);var ee=te,ie=ee,ae=(i("a9fd"),Object(C["a"])(ie,It,Lt,!1,null,null,null)),ne=ae.exports,se=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("canvas",{attrs:{id:"weather"}})},re=[],ce=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.ctx=null,t.particles=[],t.w=null,t.h=null,t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"letItRain",value:function(){var t=300,e=document.getElementById("weather");if(e.width=window.innerWidth,e.height=window.innerHeight,e.getContext){this.ctx=e.getContext("2d"),this.w=e.width,this.h=e.height,this.ctx.strokeStyle="rgba(255,255,255,0.9)",this.ctx.lineWidth=1,this.ctx.lineCap="round";for(var i=0;i<t;i++)this.particles.push({x:Math.random()*this.w,y:Math.random()*this.h,l:Math.random(),xs:4*Math.random()-4+2,ys:10*Math.random()+10});var a=this.draw.bind(this);setInterval(a,30)}}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.w,this.h);for(var t=0;t<this.particles.length;t++){var e=this.particles[t];this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(e.x+e.l*e.xs,e.y+e.l*e.ys),this.ctx.stroke()}this.move()}},{key:"move",value:function(){for(var t=0;t<this.particles.length;t++){var e=this.particles[t];e.x+=.1,e.y+=5,(e.x>this.w||e.y>this.h)&&(e.x=Math.random()*this.w,e.y=-20)}}},{key:"mounted",value:function(){this.letItRain()}}]),e}(f["c"]);ce=d["a"]([f["a"]],ce);var oe=ce,le=oe,ue=(i("86c5"),Object(C["a"])(le,se,re,!1,null,null,null)),de=ue.exports,fe=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.time="",t.drawer=!1,t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"toggleDrawer",value:function(t){this.drawer=t}},{key:"getTime",value:function(){var t=(new Date).getHours();this.time=t>=18&&t<=23?"evening":t>=0&&t<6?"night":t>=6&&t<12?"morning":"day"}},{key:"mounted",value:function(){vt.getForecast(this.currentCity),this.getTime()}}]),e}(f["c"]);d["a"]([h["d"]],fe.prototype,"cities",void 0),d["a"]([h["b"]],fe.prototype,"currentCity",void 0),fe=d["a"]([Object(f["a"])({components:{WeatherCanvas:de,Drawer:ne,CityWeather:Ct,CityForecast:Tt,Header:O,Weather:T}})],fe);var he=fe,ve=he,ye=(i("cccb"),Object(C["a"])(ve,tt,et,!1,null,null,null)),pe=ye.exports;a["default"].use(Y["a"]);var me=new Y["a"]({mode:"history",base:"/weather-app/",routes:[{path:"/",name:"Home",component:pe}]}),be=i("cebc"),_e=i("2f62"),ge=i("0e44"),Ce={city:""},we={},Oe={},je={},ke={namespaced:!0,state:Ce,getters:we,mutations:Oe,actions:je};a["default"].use(_e["a"]);var xe={plugins:[Object(ge["a"])()],state:{lang:"ru",cities:[],cityIndex:0},getters:{currentCity:function(t){try{return t.cities[t.cityIndex]}catch(e){return null}},isWeather:function(t,e){try{var i=e.currentCity,a=!!i.weather;return i&&a}catch(n){return null}}},mutations:{addCity:function(t,e){t.cities.push(e)},removeCity:function(t,e){t.cities.splice(e,1)},setCityIndex:function(t,e){t.cityIndex=e},setWeather:function(t,e){t.cities[t.cityIndex].weather=e},setForecast:function(t,e){t.cities[t.cityIndex].forecast=e}},actions:{getCityByPosition:function(t,e){t.commit,t.dispatch;return B().then(function(t){if(200===t.code){var e=t.lat,i=t.lon;return vt.getCity({lat:e,lon:i})}return Promise.reject(t.code)})},getCityByName:function(t,e){t.commit;return vt.searchCity(e)},addCity:function(t,e){var i=t.commit,a=(t.dispatch,t.state),n=Object(be["a"])({},e);if(console.log(a.cities.some(function(t){return t.id===n.id})),!a.cities.some(function(t){return t.id===n.id}))return vt.getWeather(e).then(function(t){return n.weather=t,vt.getForecast(n)}).then(function(t){n.forecast=t.list,i("setCityIndex",a.cities.length),i("addCity",n)})},removeCity:function(t,e){var i=t.commit,a=t.state;i("removeCity",e);var n=a.cities.length-1;e>n&&(e=n),i("setCityIndex",e)}},modules:{weather:ke}},$e=new _e["a"].Store(xe),Ee=function(){var t=this,e=t.$createElement,i=t._self._c||e;return t.visible?i("div",{staticClass:"sc-loader",class:t.loaderCss},[i("div",{staticClass:"sc-loader__panel"},[t._m(0),t.message?i("div",{staticClass:"vox-loader__message"},[t._v(t._s(t.message))]):t._e()])]):t._e()},Se=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"spinner"},[i("div",{staticClass:"rect1"}),i("div",{staticClass:"rect2"}),i("div",{staticClass:"rect3"}),i("div",{staticClass:"rect4"}),i("div",{staticClass:"rect5"})])}],Te=function(t){function e(){var t;return Object(r["a"])(this,e),t=Object(o["a"])(this,Object(l["a"])(e).apply(this,arguments)),t.visible=!1,t.fullscreen=!0,t.message="",t.transparent=!1,t}return Object(u["a"])(e,t),Object(c["a"])(e,[{key:"show",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.fullscreen,i=void 0===e||e,a=t.transparent,n=void 0!==a&&a,s=t.message,r=void 0===s?"":s;this.visible=!0,this.fullscreen=i,this.transparent=n,this.message=r}},{key:"hide",value:function(){this.visible=!1}},{key:"loaderCss",get:function(){return[this.message?"with-message":"",this.fullscreen?"fullscreen":"",this.transparent?"transparent":""]}}]),e}(f["c"]);Te=d["a"]([f["a"]],Te);var Ie=Te,Le=Ie,Me=(i("cd03"),Object(C["a"])(Le,Ee,Se,!1,null,null,null)),De=Me.exports,Pe=function(){function t(){Object(r["a"])(this,t)}return Object(c["a"])(t,[{key:"install",value:function(t){var e=new De({el:document.createElement("div")});t.prototype.$loader=e,this.insertInDOM(document.body,e.$el),this.registerDirective()}},{key:"insertInDOM",value:function(t,e){t&&t.appendChild(e)}},{key:"registerDirective",value:function(){var t=this;a["default"].directive("loading",{bind:function(e,i){var a=new De({el:document.createElement("div"),data:{fullscreen:!!i.modifiers.fullscreen,size:i.modifiers.s?"s":i.modifiers.xs?"xs":"l",color:i.modifiers.white?"white":"violet",transparent:!!i.modifiers.transparent,visible:!!i.value}});t.instance=a,t.loader=a.$el,e.style.position="relative",t.insertInDOM(e,t.loader)},update:function(e,i){i.oldValue!==i.value&&t.instance&&(i.value?t.instance.show(i.modifiers):t.instance.hide())},unbind:function(){t.loader&&t.loader.parentNode&&t.loader.parentNode.removeChild(t.loader)}})}}]),t}(),He=new Pe,Fe=(i("0fb7"),i("450d"),i("f529")),We=i.n(Fe),Ne=(i("bd49"),i("18ff")),Be=i.n(Ne),Ae=(i("960d"),i("defb")),Re=i.n(Ae),Ue=(i("cb70"),i("b370")),ze=i.n(Ue),Ge=(i("6611"),i("e772")),Je=i.n(Ge),Ve=(i("1f1a"),i("4e4b")),qe=i.n(Ve),Ze=(i("10cb"),i("f3ad")),Ke=i.n(Ze),Qe=(i("1951"),i("eedf")),Xe=i.n(Qe),Ye=i("dccd"),ti=i.n(Ye),ei=i("4897"),ii=i.n(ei);i("9225");ii.a.use(ti.a),a["default"].use(Xe.a),a["default"].use(Ke.a),a["default"].use(qe.a),a["default"].use(Je.a),a["default"].use(ze.a),a["default"].use(Re.a),a["default"].use(Be.a),a["default"].prototype.$message=We.a;i("4da3");a["default"].use(He),a["default"].config.productionTip=!1,new a["default"]({store:$e,router:me,i18n:ct,render:function(t){return t(X)}}).$mount("#app")},e0b8:function(t,e,i){},e20c:function(t,e,i){"use strict";var a=i("8dae"),n=i.n(a);n.a},e861:function(t,e,i){},edd4:function(t){t.exports={header:{lang:"en",lang_item:["Русский","English"]},err:{1:"Geolocation permission denied",2:"Position unavailable",3:"Geolocation time out",800:"Error 800",900:"Error 900"}}},ee1b:function(t,e,i){},eefb:function(t,e,i){},f0c0:function(t,e,i){"use strict";var a=i("4e1e"),n=i.n(a);n.a},f2c5:function(t,e,i){}});
//# sourceMappingURL=app.f854b5c1.js.map